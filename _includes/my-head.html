{% comment %}
<!--
Using `preload` so that page rendering doesn't get blocked.
Fill in `href`. You may have to adjust `as` and `onload`/`rel`, depending on content.
-->
<link href="<path/to/content.css>" rel="preload" as="style" onload="this.rel='stylesheet'">

<!--
Fallback in case JavaScript isn't enabled.
Fill in `href`. You may have to adjust `rel`.
-->
<noscript><link href="<path/to/content.css>" rel="stylesheet"></noscript>

{% endcomment %}

<script type="module">
  document.querySelector('hy-push-state').addEventListener('load', () => {
      let tocElement = document.getElementById("markdown-toc");
  
      if(tocElement){
          let affixedDiv = document.createElement("div");
          affixedDiv.style.position = "relative";
          affixedDiv.style.top = "-1rem";
          tocElement.parentNode.insertBefore(affixedDiv, tocElement);
          
          let headerList = document.getElementsByClassName("permalink");
          let prevElement;
          window.addEventListener("scroll", () => {
              let hurdleTop = affixedDiv.getBoundingClientRect().top;
              if(hurdleTop <= 0) tocElement.classList.add("affix");
              else tocElement.classList.remove("affix");
  
              for(let i=0;i<headerList.length;i++){
                  if(headerList[i].getBoundingClientRect().top >= 0){
                  prevElement?.style.removeProperty("font-weight");
                  let tocId = "markdown-toc-" + headerList[i].parentNode.id;
                  prevElement = document.getElementById(tocId);
                  prevElement.style.fontWeight = "bold";;
  
                  break;
                  }
              }
          });
      }
  });
  </script>

<!DOCTYPE html>
<!-- KaTeX requires the use of the HTML5 doctype. Without it, KaTeX may not render properly -->
<html>
  <head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">

    <!-- The loading of KaTeX is deferred to speed up page rendering -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>

    <!-- To automatically render math in text elements, include the auto-render extension: -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
        onload="renderMathInElement(document.body);"></script>
  </head>
  ...
</html>